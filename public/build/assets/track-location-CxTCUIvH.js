import{r as e,j as t,L as v}from"./app-BCQ_Orgh.js";import{L as D,G as L,M as x,D as E}from"./esm-BBIYKbL9.js";import{A as I}from"./app-layout-CWuP1faJ.js";import"./index-B8puw06v.js";import"./app-logo-icon-CAkcPuWW.js";import"./index-DvCO__Pk.js";import"./index-DzzWTSr8.js";const M=[{title:"Dashboard",href:"/dashboard"},{title:"Incidents",href:"/incident-reports"},{title:"Track Location",href:"/track-location"}],A="AIzaSyC_WZ0T_FCfAV_G1yfuBGozFa2zOX9l82c",G={width:"100%",height:"100vh"},k=({incident:r})=>{const[o,f]=e.useState(null),[a,j]=e.useState(null),[c,S]=e.useState(""),[l,b]=e.useState(""),[_,w]=e.useState([]),i={lat:parseFloat(r.latitude),lng:parseFloat(r.longitude)};return e.useEffect(()=>{navigator.geolocation.getCurrentPosition(s=>{f({lat:s.coords.latitude,lng:s.coords.longitude})},s=>{console.error("Error getting user location:",s)})},[]),e.useEffect(()=>{o&&window.google&&new window.google.maps.DirectionsService().route({origin:o,destination:i,travelMode:window.google.maps.TravelMode.DRIVING},(n,d)=>{var p,g;if(d===window.google.maps.DirectionsStatus.OK&&n){j(n);const u=n.routes[0].legs[0];S(((p=u.distance)==null?void 0:p.text)||""),b(((g=u.duration)==null?void 0:g.text)||"");const m=[];n.routes[0].overview_path.forEach(h=>{m.push({lat:h.lat(),lng:h.lng()})}),w(m)}else console.error("Directions request failed due to "+d)})},[o,i]),t.jsxs(I,{breadcrumbs:M,children:[t.jsx(v,{title:"Incidents Management"}),t.jsxs(D,{googleMapsApiKey:A,children:[t.jsxs(L,{mapContainerStyle:G,center:o||i,zoom:14,children:[o&&t.jsx(x,{position:o,label:"You",icon:{url:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png"}}),t.jsx(x,{position:i,label:"Incident",icon:{url:"https://maps.google.com/mapfiles/ms/icons/red-dot.png"}}),a&&t.jsx(t.Fragment,{children:t.jsx(E,{directions:a})})]}),c&&l&&t.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"20px",backgroundColor:"white",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",zIndex:1},children:[t.jsx("h3",{children:"Route Information"}),t.jsxs("p",{children:["Distance: ",c]}),t.jsxs("p",{children:["Estimated Travel Time: ",l]})]})]})]})};export{k as default};
