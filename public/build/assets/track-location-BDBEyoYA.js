import{r as e,j as t,L as A}from"./app-CXUyrQT4.js";import{L as I,G as w,M as f,P as E,D as C}from"./esm-UwpY2AcY.js";import{A as F}from"./app-layout-D3bY0KSf.js";import"./index-B4By9XD7.js";import"./app-logo-icon-BuDqrCmE.js";import"./index-DtxFhw8P.js";import"./index-Ba0HkhAA.js";const G=[{title:"Dashboard",href:"/dashboard"},{title:"Incidents",href:"/incident-reports"},{title:"Track Location",href:"/track-location"}],O="AIzaSyC_WZ0T_FCfAV_G1yfuBGozFa2zOX9l82c",R={width:"100%",height:"100vh"},H=({incident:c})=>{const[_,S]=e.useState(null),[l,b]=e.useState(null),[p,j]=e.useState(""),[d,v]=e.useState(""),[z,L]=e.useState([]),[s,P]=e.useState(null),[k,y]=e.useState([]),[u,D]=e.useState(!1),a={lat:parseFloat(c.latitude),lng:parseFloat(c.longitude)};e.useEffect(()=>{const n=navigator.geolocation.watchPosition(o=>{const r={lat:o.coords.latitude,lng:o.coords.longitude};S(r),P(r),y(i=>[...i,r])},o=>{console.error("Error tracking location:",o)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0});return()=>{navigator.geolocation.clearWatch(n)}},[]),e.useEffect(()=>{s&&u&&new google.maps.DirectionsService().route({origin:s,destination:a,travelMode:google.maps.TravelMode.DRIVING,provideRouteAlternatives:!1},(o,r)=>{var i,g;if(r===google.maps.DirectionsStatus.OK&&o){b(o);const m=o.routes[0].legs[0];j(((i=m.distance)==null?void 0:i.text)||""),v(((g=m.duration)==null?void 0:g.text)||"");const h=[];o.routes[0].overview_path.forEach(x=>{h.push({lat:x.lat(),lng:x.lng()})}),L(h)}else console.error("Directions request failed:",r)})},[s,a,u]);const M=n=>{D(!0)};return t.jsxs(F,{breadcrumbs:G,children:[t.jsx(A,{title:"Incidents Management"}),t.jsxs(I,{googleMapsApiKey:O,libraries:["places","geometry"],children:[t.jsxs(w,{mapContainerStyle:R,center:s||a,zoom:14,onLoad:M,children:[s&&t.jsx(f,{position:s,label:"You",icon:{url:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png"}}),t.jsx(f,{position:a,label:"Incident",icon:{url:"https://maps.google.com/mapfiles/ms/icons/red-dot.png"}}),t.jsx(E,{path:k,options:{strokeColor:"#4285F4",strokeOpacity:1,strokeWeight:4}}),l&&t.jsx(C,{directions:l,options:{suppressMarkers:!0,preserveViewport:!0,polylineOptions:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:6}}})]}),p&&d&&t.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"20px",backgroundColor:"white",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",zIndex:1},children:[t.jsx("h3",{children:"Route Information"}),t.jsxs("p",{children:["Distance Remaining: ",p]}),t.jsxs("p",{children:["Estimated Time: ",d]})]})]})]})};export{H as default};
