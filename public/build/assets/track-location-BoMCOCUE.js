import{r as o,j as t,L as I}from"./app-DxD7iJ46.js";import{L,G as M,M as x,P as k,D as y}from"./esm-D0j6v2nG.js";import{A}from"./app-layout-D7gHyiDF.js";import"./index-CEhz0Kvp.js";import"./app-logo-icon-DnK-3NJ3.js";import"./index-Bt8ITxkz.js";import"./index-BBWvNoEx.js";const C=[{title:"Dashboard",href:"/dashboard"},{title:"Incidents",href:"/incident-reports"},{title:"Track Location",href:"/track-location"}],G="AIzaSyC_WZ0T_FCfAV_G1yfuBGozFa2zOX9l82c",R={width:"100%",height:"100vh"},B=({incident:c})=>{const[_,f]=o.useState(null),[l,w]=o.useState(null),[p,S]=o.useState(""),[d,b]=o.useState(""),[z,j]=o.useState([]),[s,P]=o.useState(null),[v,D]=o.useState([]),n={lat:parseFloat(c.latitude),lng:parseFloat(c.longitude)};return o.useEffect(()=>{const u=navigator.geolocation.watchPosition(e=>{const i={lat:e.coords.latitude,lng:e.coords.longitude};f(i),P(i),D(r=>[...r,i])},e=>{console.error("Error tracking location:",e)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0});return()=>{navigator.geolocation.clearWatch(u)}},[]),o.useEffect(()=>{s&&window.google&&new window.google.maps.DirectionsService().route({origin:s,destination:n,travelMode:window.google.maps.TravelMode.DRIVING},(e,i)=>{var r,g;if(i===window.google.maps.DirectionsStatus.OK&&e){w(e);const a=e.routes[0].legs[0];S(((r=a.distance)==null?void 0:r.text)||""),b(((g=a.duration)==null?void 0:g.text)||"");const h=[];a.steps.forEach(E=>{E.path.forEach(m=>{h.push({lat:m.lat(),lng:m.lng()})})}),j(h)}})},[s,n]),t.jsxs(A,{breadcrumbs:C,children:[t.jsx(I,{title:"Incidents Management"}),t.jsxs(L,{googleMapsApiKey:G,children:[t.jsxs(M,{mapContainerStyle:R,center:s||n,zoom:14,children:[s&&t.jsx(x,{position:s,label:"You",icon:{url:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png"}}),t.jsx(x,{position:n,label:"Incident",icon:{url:"https://maps.google.com/mapfiles/ms/icons/red-dot.png"}}),t.jsx(k,{path:v,options:{strokeColor:"#4285F4",strokeOpacity:1,strokeWeight:4}}),l&&t.jsx(y,{directions:l,options:{suppressMarkers:!0,preserveViewport:!0}})]}),p&&d&&t.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"20px",backgroundColor:"white",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",zIndex:1},children:[t.jsx("h3",{children:"Route Information"}),t.jsxs("p",{children:["Distance Remaining: ",p]}),t.jsxs("p",{children:["Estimated Time: ",d]})]})]})]})};export{B as default};
