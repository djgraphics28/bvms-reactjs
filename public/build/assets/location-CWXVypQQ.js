import{r as l,j as e,L as g,a as h}from"./app-C-G7bMw3.js";import{A as b}from"./app-layout-DS9t7BUQ.js";import{L as f,G as p,P as u,M as v}from"./esm-BAAKhDxp.js";import"./app-logo-icon-yaI_0DtJ.js";import"./index-BPOw6HZV.js";import"./index-C3UcmTuE.js";const j=[{title:"Vehicles",href:"/vehicles"},{title:"Real-Time Location",href:"/vehicles/location"}],y="AIzaSyC_WZ0T_FCfAV_G1yfuBGozFa2zOX9l82c";function C({vehicle:a}){const[t,d]=l.useState([]),[o,n]=l.useState({lat:15.9061,lng:120.5853}),c={width:"100%",height:"100%"};l.useEffect(()=>{const s=async()=>{try{const r=await h.get(`/vehicles/${a.id}/get-location`);if(d(r.data),r.data.length>0){const i=r.data[r.data.length-1];n({lat:i.latitude,lng:i.longitude})}}catch(r){console.error("Error fetching locations:",r)}};s();const m=setInterval(s,5e3);return()=>clearInterval(m)},[a.id]);const x=t.map(s=>({lat:s.latitude,lng:s.longitude}));return e.jsxs(b,{breadcrumbs:j,children:[e.jsx(g,{title:"Real-Time Location"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsxs("div",{className:"grid auto-rows-min gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative aspect-video overflow-hidden rounded-xl border bg-white dark:bg-gray-800 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsx("div",{className:"w-full h-32 mb-4",children:e.jsx("img",{src:"/placeholder-vehicle.png",alt:`${a.brand} ${a.model}`,className:"w-full h-full object-cover rounded-lg"})}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Vehicle Description"}),e.jsxs("div",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[a.plate_number," • ",a.brand," ",a.model," • ",a.color]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Active"})]})]})}),e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative aspect-video overflow-hidden rounded-xl border bg-white dark:bg-gray-800 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Location"}),e.jsx("div",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.length>0?`${t[t.length-1].latitude.toFixed(4)}, ${t[t.length-1].longitude.toFixed(4)}`:"No Data"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.length>0?new Date(t[t.length-1].timestamp).toLocaleTimeString():"--:--"})]})}),e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative aspect-video overflow-hidden rounded-xl border bg-white dark:bg-gray-800 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Trip Statistics"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.length}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Waypoints"})]}),e.jsx("div",{className:"text-sm text-blue-500",children:"View Details →"})]})})]}),e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:e.jsx(f,{googleMapsApiKey:y,children:e.jsxs(p,{mapContainerStyle:c,center:o,zoom:18,children:[e.jsx(u,{path:x,options:{strokeColor:"#0000FF",strokeOpacity:1,strokeWeight:4,fillColor:"#0000FF",fillOpacity:.35,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1}}),t.length>0&&e.jsx(v,{position:{lat:t[t.length-1].latitude,lng:t[t.length-1].longitude},icon:{url:"https://maps.google.com/mapfiles/kml/shapes/cabs.png",scaledSize:new window.google.maps.Size(32,32)},animation:window.google.maps.Animation.BOUNCE})]})})})]})]})}export{C as default};
