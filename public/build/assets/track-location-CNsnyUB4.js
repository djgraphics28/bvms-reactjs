import{r as e,j as t,L as D}from"./app-CGBEw2mQ.js";import{L,G as E,M as x,D as I}from"./esm-BC2mkGy8.js";import{A as M}from"./app-layout-CS8QzYW-.js";import"./index-CohjghJM.js";import"./app-logo-icon-BuLI_f4t.js";import"./index-DFq1oOcb.js";import"./index-B1iFgkKO.js";const A=[{title:"Dashboard",href:"/dashboard"},{title:"Incidents",href:"/incident-reports"},{title:"Track Location",href:"/track-location"}],G="AIzaSyC_WZ0T_FCfAV_G1yfuBGozFa2zOX9l82c",_={width:"100%",height:"100vh"},k=({incident:r})=>{const[o,f]=e.useState(null),[a,j]=e.useState(null),[c,S]=e.useState(""),[l,b]=e.useState(""),[y,v]=e.useState([]),i={lat:parseFloat(r.latitude),lng:parseFloat(r.longitude)};return e.useEffect(()=>{navigator.geolocation.getCurrentPosition(s=>{f({lat:s.coords.latitude,lng:s.coords.longitude})},s=>{console.error("Error getting user location:",s)})},[]),e.useEffect(()=>{o&&new google.maps.DirectionsService().route({origin:o,destination:i,travelMode:google.maps.TravelMode.DRIVING},(n,d)=>{var p,u;if(d===google.maps.DirectionsStatus.OK&&n){j(n);const g=n.routes[0].legs[0];S(((p=g.distance)==null?void 0:p.text)||""),b(((u=g.duration)==null?void 0:u.text)||"");const m=[];n.routes[0].overview_path.forEach(h=>{m.push({lat:h.lat(),lng:h.lng()})}),v(m)}else console.error("Directions request failed due to "+d)})},[o,i]),t.jsxs(M,{breadcrumbs:A,children:[t.jsx(D,{title:"Incidents Management"}),t.jsxs(L,{googleMapsApiKey:G,children:[t.jsxs(E,{mapContainerStyle:_,center:o||i,zoom:14,children:[o&&t.jsx(x,{position:o,label:"You",icon:{url:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png"}}),t.jsx(x,{position:i,label:"Incident",icon:{url:"https://maps.google.com/mapfiles/ms/icons/red-dot.png"}}),a&&t.jsx(t.Fragment,{children:t.jsx(I,{directions:a})})]}),c&&l&&t.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"20px",backgroundColor:"white",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",zIndex:1},children:[t.jsx("h3",{children:"Route Information"}),t.jsxs("p",{children:["Distance: ",c]}),t.jsxs("p",{children:["Estimated Travel Time: ",l]})]})]})]})};export{k as default};
