import{r as t,j as e}from"./app-DzLkzM4F.js";import{L as b,G as E,M as h,D as M}from"./esm-DWIxdsFt.js";import"./index-Dh2z54Pa.js";const G="AIzaSyC_WZ0T_FCfAV_G1yfuBGozFa2zOX9l82c",I={width:"100%",height:"100vh"},y=({incident:r})=>{const[o,f]=t.useState(null),[a,S]=t.useState(null),[c,j]=t.useState(""),[l,v]=t.useState(""),[_,D]=t.useState([]),i={lat:parseFloat(r.latitude),lng:parseFloat(r.longitude)};return t.useEffect(()=>{navigator.geolocation.getCurrentPosition(s=>{f({lat:s.coords.latitude,lng:s.coords.longitude})},s=>{console.error("Error getting user location:",s)})},[]),t.useEffect(()=>{o&&new google.maps.DirectionsService().route({origin:o,destination:i,travelMode:google.maps.TravelMode.DRIVING},(n,d)=>{var p,g;if(d===google.maps.DirectionsStatus.OK&&n){S(n);const u=n.routes[0].legs[0];j(((p=u.distance)==null?void 0:p.text)||""),v(((g=u.duration)==null?void 0:g.text)||"");const m=[];n.routes[0].overview_path.forEach(x=>{m.push({lat:x.lat(),lng:x.lng()})}),D(m)}else console.error("Directions request failed due to "+d)})},[o,i]),e.jsxs(b,{googleMapsApiKey:G,children:[e.jsxs(E,{mapContainerStyle:I,center:o||i,zoom:14,children:[o&&e.jsx(h,{position:o,label:"You",icon:{url:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png"}}),e.jsx(h,{position:i,label:"Incident",icon:{url:"https://maps.google.com/mapfiles/ms/icons/red-dot.png"}}),a&&e.jsx(e.Fragment,{children:e.jsx(M,{directions:a})})]}),c&&l&&e.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"20px",backgroundColor:"white",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",zIndex:1},children:[e.jsx("h3",{children:"Route Information"}),e.jsxs("p",{children:["Distance: ",c]}),e.jsxs("p",{children:["Estimated Travel Time: ",l]})]})]})};export{y as default};
