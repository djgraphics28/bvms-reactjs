import{r,U as Se,K as Pt,j as s,L as $t,S as Te}from"./app-BCQ_Orgh.js";import{L as Tt,G as st,M as lt}from"./esm-BBIYKbL9.js";import{A as Lt}from"./app-layout-CWuP1faJ.js";import{i as _t,R as zt,F as q,I as je,S as B,s as Le}from"./DeleteOutlined-BJQ4If40.js";import{d as Ze,e as We,S as _e}from"./EditOutlined-hD7AX1LU.js";import{c as Q,b as me,S as kt,a0 as At,N as L,K as Ge,a as Z,a1 as Dt,w as Ft,_ as Oe,d as ie,H as Xt,P as vt,u as Ue,I as Me,g as pt,m as qe,F as xe,a2 as Yt,t as Bt,e as Xe,$ as Ht,C as tt,Z as ht,a3 as Ct,V as De,k as Vt,J as Zt,r as Wt,a4 as bt,a5 as Gt,o as Ut,a6 as qt,a7 as Kt,a8 as Qt,W as Jt,M as en,B as de}from"./AntdIcon-aFpKBviR.js";import{c as ye,D as tn,g as nn,u as on,p as ct,R as rn,F as an,M as ut,a as sn,b as ln}from"./PlusOutlined-B6Jdub8s.js";import{R as cn}from"./InfoCircleOutlined-C_Vz6yMn.js";import"./index-B8puw06v.js";import"./app-logo-icon-CAkcPuWW.js";import"./index-DvCO__Pk.js";import"./index-DzzWTSr8.js";function xt(){var e=document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return{width:e,height:t}}function un(e){var t=e.getBoundingClientRect(),n=document.documentElement;return{left:t.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}var Ne=r.createContext(null),dn=function(t){var n=t.visible,o=t.maskTransitionName,a=t.getContainer,i=t.prefixCls,m=t.rootClassName,c=t.icons,d=t.countRender,g=t.showSwitch,v=t.showProgress,u=t.current,b=t.transform,C=t.count,S=t.scale,w=t.minScale,M=t.maxScale,x=t.closeIcon,R=t.onActive,E=t.onClose,P=t.onZoomIn,f=t.onZoomOut,O=t.onRotateRight,p=t.onRotateLeft,h=t.onFlipX,j=t.onFlipY,N=t.onReset,y=t.toolbarRender,$=t.zIndex,l=t.image,I=r.useContext(Ne),T=c.rotateLeft,k=c.rotateRight,_=c.zoomIn,A=c.zoomOut,J=c.close,z=c.left,W=c.right,G=c.flipX,ee=c.flipY,ce="".concat(i,"-operations-operation");r.useEffect(function(){var F=function(Y){Y.keyCode===Ge.ESC&&E()};return n&&window.addEventListener("keydown",F),function(){window.removeEventListener("keydown",F)}},[n]);var oe=function(X,Y){X.preventDefault(),X.stopPropagation(),R(Y)},H=r.useCallback(function(F){var X=F.type,Y=F.disabled,K=F.onClick,V=F.icon;return r.createElement("div",{key:X,className:Q(ce,"".concat(i,"-operations-operation-").concat(X),me({},"".concat(i,"-operations-operation-disabled"),!!Y)),onClick:K},V)},[ce,i]),ue=g?H({icon:z,onClick:function(X){return oe(X,-1)},type:"prev",disabled:u===0}):void 0,re=g?H({icon:W,onClick:function(X){return oe(X,1)},type:"next",disabled:u===C-1}):void 0,te=H({icon:ee,onClick:j,type:"flipY"}),D=H({icon:G,onClick:h,type:"flipX"}),se=H({icon:T,onClick:p,type:"rotateLeft"}),U=H({icon:k,onClick:O,type:"rotateRight"}),ne=H({icon:A,onClick:f,type:"zoomOut",disabled:S<=w}),le=H({icon:_,onClick:P,type:"zoomIn",disabled:S===M}),fe=r.createElement("div",{className:"".concat(i,"-operations")},te,D,se,U,ne,le);return r.createElement(kt,{visible:n,motionName:o},function(F){var X=F.className,Y=F.style;return r.createElement(At,{open:!0,getContainer:a??document.body},r.createElement("div",{className:Q("".concat(i,"-operations-wrapper"),X,m),style:L(L({},Y),{},{zIndex:$})},x===null?null:r.createElement("button",{className:"".concat(i,"-close"),onClick:E},x||J),g&&r.createElement(r.Fragment,null,r.createElement("div",{className:Q("".concat(i,"-switch-left"),me({},"".concat(i,"-switch-left-disabled"),u===0)),onClick:function(V){return oe(V,-1)}},z),r.createElement("div",{className:Q("".concat(i,"-switch-right"),me({},"".concat(i,"-switch-right-disabled"),u===C-1)),onClick:function(V){return oe(V,1)}},W)),r.createElement("div",{className:"".concat(i,"-footer")},v&&r.createElement("div",{className:"".concat(i,"-progress")},d?d(u+1,C):r.createElement("bdi",null,"".concat(u+1," / ").concat(C))),y?y(fe,L(L({icons:{prevIcon:ue,nextIcon:re,flipYIcon:te,flipXIcon:D,rotateLeftIcon:se,rotateRightIcon:U,zoomOutIcon:ne,zoomInIcon:le},actions:{onActive:R,onFlipY:j,onFlipX:h,onRotateLeft:p,onRotateRight:O,onZoomOut:f,onZoomIn:P,onReset:N,onClose:E},transform:b},I?{current:u,total:C}:{}),{},{image:l})):fe)))})},ze={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function mn(e,t,n,o){var a=r.useRef(null),i=r.useRef([]),m=r.useState(ze),c=Z(m,2),d=c[0],g=c[1],v=function(S){g(ze),Dt(ze,d)||o==null||o({transform:ze,action:S})},u=function(S,w){a.current===null&&(i.current=[],a.current=Ft(function(){g(function(M){var x=M;return i.current.forEach(function(R){x=L(L({},x),R)}),a.current=null,o==null||o({transform:x,action:w}),x})})),i.current.push(L(L({},d),S))},b=function(S,w,M,x,R){var E=e.current,P=E.width,f=E.height,O=E.offsetWidth,p=E.offsetHeight,h=E.offsetLeft,j=E.offsetTop,N=S,y=d.scale*S;y>n?(y=n,N=n/d.scale):y<t&&(y=R?y:t,N=y/d.scale);var $=M??innerWidth/2,l=x??innerHeight/2,I=N-1,T=I*P*.5,k=I*f*.5,_=I*($-d.x-h),A=I*(l-d.y-j),J=d.x-(_-T),z=d.y-(A-k);if(S<1&&y===1){var W=O*y,G=p*y,ee=xt(),ce=ee.width,oe=ee.height;W<=ce&&G<=oe&&(J=0,z=0)}u({x:J,y:z,scale:y},w)};return{transform:d,resetTransform:v,updateTransform:u,dispatchZoomChange:b}}function dt(e,t,n,o){var a=t+n,i=(n-o)/2;if(n>o){if(t>0)return me({},e,i);if(t<0&&a<o)return me({},e,-i)}else if(t<0||a>o)return me({},e,t<0?i:-i);return{}}function wt(e,t,n,o){var a=xt(),i=a.width,m=a.height,c=null;return e<=i&&t<=m?c={x:0,y:0}:(e>i||t>m)&&(c=L(L({},dt("x",n,e,i)),dt("y",o,t,m))),c}var Ie=1,fn=1;function gn(e,t,n,o,a,i,m){var c=a.rotate,d=a.scale,g=a.x,v=a.y,u=r.useState(!1),b=Z(u,2),C=b[0],S=b[1],w=r.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),M=function(f){!t||f.button!==0||(f.preventDefault(),f.stopPropagation(),w.current={diffX:f.pageX-g,diffY:f.pageY-v,transformX:g,transformY:v},S(!0))},x=function(f){n&&C&&i({x:f.pageX-w.current.diffX,y:f.pageY-w.current.diffY},"move")},R=function(){if(n&&C){S(!1);var f=w.current,O=f.transformX,p=f.transformY,h=g!==O&&v!==p;if(!h)return;var j=e.current.offsetWidth*d,N=e.current.offsetHeight*d,y=e.current.getBoundingClientRect(),$=y.left,l=y.top,I=c%180!==0,T=wt(I?N:j,I?j:N,$,l);T&&i(L({},T),"dragRebound")}},E=function(f){if(!(!n||f.deltaY==0)){var O=Math.abs(f.deltaY/100),p=Math.min(O,fn),h=Ie+p*o;f.deltaY>0&&(h=Ie/h),m(h,"wheel",f.clientX,f.clientY)}};return r.useEffect(function(){var P,f,O,p;if(t){O=ye(window,"mouseup",R,!1),p=ye(window,"mousemove",x,!1);try{window.top!==window.self&&(P=ye(window.top,"mouseup",R,!1),f=ye(window.top,"mousemove",x,!1))}catch{}}return function(){var h,j,N,y;(h=O)===null||h===void 0||h.remove(),(j=p)===null||j===void 0||j.remove(),(N=P)===null||N===void 0||N.remove(),(y=f)===null||y===void 0||y.remove()}},[n,C,g,v,c,t]),{isMoving:C,onMouseDown:M,onMouseMove:x,onMouseUp:R,onWheel:E}}function vn(e){return new Promise(function(t){if(!e){t(!1);return}var n=document.createElement("img");n.onerror=function(){return t(!1)},n.onload=function(){return t(!0)},n.src=e})}function St(e){var t=e.src,n=e.isCustomPlaceholder,o=e.fallback,a=r.useState(n?"loading":"normal"),i=Z(a,2),m=i[0],c=i[1],d=r.useRef(!1),g=m==="error";r.useEffect(function(){var C=!0;return vn(t).then(function(S){!S&&C&&c("error")}),function(){C=!1}},[t]),r.useEffect(function(){n&&!d.current?c("loading"):g&&c("normal")},[t]);var v=function(){c("normal")},u=function(S){d.current=!1,m==="loading"&&S!==null&&S!==void 0&&S.complete&&(S.naturalWidth||S.naturalHeight)&&(d.current=!0,v())},b=g&&o?{src:o}:{onLoad:v,src:t};return[u,b,m]}function Fe(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.hypot(n,o)}function pn(e,t,n,o){var a=Fe(e,n),i=Fe(t,o);if(a===0&&i===0)return[e.x,e.y];var m=a/(a+i),c=e.x+m*(t.x-e.x),d=e.y+m*(t.y-e.y);return[c,d]}function hn(e,t,n,o,a,i,m){var c=a.rotate,d=a.scale,g=a.x,v=a.y,u=r.useState(!1),b=Z(u,2),C=b[0],S=b[1],w=r.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),M=function(f){w.current=L(L({},w.current),f)},x=function(f){if(t){f.stopPropagation(),S(!0);var O=f.touches,p=O===void 0?[]:O;p.length>1?M({point1:{x:p[0].clientX,y:p[0].clientY},point2:{x:p[1].clientX,y:p[1].clientY},eventType:"touchZoom"}):M({point1:{x:p[0].clientX-g,y:p[0].clientY-v},eventType:"move"})}},R=function(f){var O=f.touches,p=O===void 0?[]:O,h=w.current,j=h.point1,N=h.point2,y=h.eventType;if(p.length>1&&y==="touchZoom"){var $={x:p[0].clientX,y:p[0].clientY},l={x:p[1].clientX,y:p[1].clientY},I=pn(j,N,$,l),T=Z(I,2),k=T[0],_=T[1],A=Fe($,l)/Fe(j,N);m(A,"touchZoom",k,_,!0),M({point1:$,point2:l,eventType:"touchZoom"})}else y==="move"&&(i({x:p[0].clientX-j.x,y:p[0].clientY-j.y},"move"),M({eventType:"move"}))},E=function(){if(n){if(C&&S(!1),M({eventType:"none"}),o>d)return i({x:0,y:0,scale:o},"touchZoom");var f=e.current.offsetWidth*d,O=e.current.offsetHeight*d,p=e.current.getBoundingClientRect(),h=p.left,j=p.top,N=c%180!==0,y=wt(N?O:f,N?f:O,h,j);y&&i(L({},y),"dragRebound")}};return r.useEffect(function(){var P;return n&&t&&(P=ye(window,"touchmove",function(f){return f.preventDefault()},{passive:!1})),function(){var f;(f=P)===null||f===void 0||f.remove()}},[n,t]),{isTouching:C,onTouchStart:x,onTouchMove:R,onTouchEnd:E}}var Cn=["fallback","src","imgRef"],bn=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],xn=function(t){var n=t.fallback,o=t.src,a=t.imgRef,i=Oe(t,Cn),m=St({src:o,fallback:n}),c=Z(m,2),d=c[0],g=c[1];return Se.createElement("img",ie({ref:function(u){a.current=u,d(u)}},i,g))},yt=function(t){var n=t.prefixCls,o=t.src,a=t.alt,i=t.imageInfo,m=t.fallback,c=t.movable,d=c===void 0?!0:c,g=t.onClose,v=t.visible,u=t.icons,b=u===void 0?{}:u,C=t.rootClassName,S=t.closeIcon,w=t.getContainer,M=t.current,x=M===void 0?0:M,R=t.count,E=R===void 0?1:R,P=t.countRender,f=t.scaleStep,O=f===void 0?.5:f,p=t.minScale,h=p===void 0?1:p,j=t.maxScale,N=j===void 0?50:j,y=t.transitionName,$=y===void 0?"zoom":y,l=t.maskTransitionName,I=l===void 0?"fade":l,T=t.imageRender,k=t.imgCommonProps,_=t.toolbarRender,A=t.onTransform,J=t.onChange,z=Oe(t,bn),W=r.useRef(),G=r.useContext(Ne),ee=G&&E>1,ce=G&&E>=1,oe=r.useState(!0),H=Z(oe,2),ue=H[0],re=H[1],te=mn(W,h,N,A),D=te.transform,se=te.resetTransform,U=te.updateTransform,ne=te.dispatchZoomChange,le=gn(W,d,v,O,D,U,ne),fe=le.isMoving,F=le.onMouseDown,X=le.onWheel,Y=hn(W,d,v,h,D,U,ne),K=Y.isTouching,V=Y.onTouchStart,pe=Y.onTouchMove,we=Y.onTouchEnd,ge=D.rotate,ve=D.scale,Ye=Q(me({},"".concat(n,"-moving"),fe));r.useEffect(function(){ue||re(!0)},[ue]);var Be=function(){se("close")},He=function(){ne(Ie+O,"zoomIn")},he=function(){ne(Ie/(Ie+O),"zoomOut")},Ce=function(){U({rotate:ge+90},"rotateRight")},Re=function(){U({rotate:ge-90},"rotateLeft")},Ee=function(){U({flipX:!D.flipX},"flipX")},Pe=function(){U({flipY:!D.flipY},"flipY")},Nt=function(){se("reset")},Ve=function(be){var $e=x+be;!Number.isInteger($e)||$e<0||$e>E-1||(re(!1),se(be<0?"prev":"next"),J==null||J($e,x))},Rt=function(be){!v||!ee||(be.keyCode===Ge.LEFT?Ve(-1):be.keyCode===Ge.RIGHT&&Ve(1))},Et=function(be){v&&(ve!==1?U({x:0,y:0,scale:1},"doubleClick"):ne(Ie+O,"doubleClick",be.clientX,be.clientY))};r.useEffect(function(){var ae=ye(window,"keydown",Rt,!1);return function(){ae.remove()}},[v,ee,x]);var at=Se.createElement(xn,ie({},k,{width:t.width,height:t.height,imgRef:W,className:"".concat(n,"-img"),alt:a,style:{transform:"translate3d(".concat(D.x,"px, ").concat(D.y,"px, 0) scale3d(").concat(D.flipX?"-":"").concat(ve,", ").concat(D.flipY?"-":"").concat(ve,", 1) rotate(").concat(ge,"deg)"),transitionDuration:(!ue||K)&&"0s"},fallback:m,src:o,onWheel:X,onMouseDown:F,onDoubleClick:Et,onTouchStart:V,onTouchMove:pe,onTouchEnd:we,onTouchCancel:we})),it=L({url:o,alt:a},i);return Se.createElement(Se.Fragment,null,Se.createElement(tn,ie({transitionName:$,maskTransitionName:I,closable:!1,keyboard:!0,prefixCls:n,onClose:g,visible:v,classNames:{wrapper:Ye},rootClassName:C,getContainer:w},z,{afterClose:Be}),Se.createElement("div",{className:"".concat(n,"-img-wrapper")},T?T(at,L({transform:D,image:it},G?{current:x}:{})):at)),Se.createElement(dn,{visible:v,transform:D,maskTransitionName:I,closeIcon:S,getContainer:w,prefixCls:n,rootClassName:C,icons:b,countRender:P,showSwitch:ee,showProgress:ce,current:x,count:E,scale:ve,minScale:h,maxScale:N,toolbarRender:_,onActive:Ve,onZoomIn:He,onZoomOut:he,onRotateRight:Ce,onRotateLeft:Re,onFlipX:Ee,onFlipY:Pe,onClose:g,onReset:Nt,zIndex:z.zIndex!==void 0?z.zIndex+1:void 0,image:it}))},Ke=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function wn(e){var t=r.useState({}),n=Z(t,2),o=n[0],a=n[1],i=r.useCallback(function(c,d){return a(function(g){return L(L({},g),{},me({},c,d))}),function(){a(function(g){var v=L({},g);return delete v[c],v})}},[]),m=r.useMemo(function(){return e?e.map(function(c){if(typeof c=="string")return{data:{src:c}};var d={};return Object.keys(c).forEach(function(g){["src"].concat(Xt(Ke)).includes(g)&&(d[g]=c[g])}),{data:d}}):Object.keys(o).reduce(function(c,d){var g=o[d],v=g.canPreview,u=g.data;return v&&c.push({data:u,id:d}),c},[])},[e,o]);return[m,i,!!e]}var Sn=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],yn=["src"],In=function(t){var n,o=t.previewPrefixCls,a=o===void 0?"rc-image-preview":o,i=t.children,m=t.icons,c=m===void 0?{}:m,d=t.items,g=t.preview,v=t.fallback,u=vt(g)==="object"?g:{},b=u.visible,C=u.onVisibleChange,S=u.getContainer,w=u.current,M=u.movable,x=u.minScale,R=u.maxScale,E=u.countRender,P=u.closeIcon,f=u.onChange,O=u.onTransform,p=u.toolbarRender,h=u.imageRender,j=Oe(u,Sn),N=wn(d),y=Z(N,3),$=y[0],l=y[1],I=y[2],T=Ue(0,{value:w}),k=Z(T,2),_=k[0],A=k[1],J=r.useState(!1),z=Z(J,2),W=z[0],G=z[1],ee=((n=$[_])===null||n===void 0?void 0:n.data)||{},ce=ee.src,oe=Oe(ee,yn),H=Ue(!!b,{value:b,onChange:function(K,V){C==null||C(K,V,_)}}),ue=Z(H,2),re=ue[0],te=ue[1],D=r.useState(null),se=Z(D,2),U=se[0],ne=se[1],le=r.useCallback(function(Y,K,V,pe){var we=I?$.findIndex(function(ge){return ge.data.src===K}):$.findIndex(function(ge){return ge.id===Y});A(we<0?0:we),te(!0),ne({x:V,y:pe}),G(!0)},[$,I]);r.useEffect(function(){re?W||A(0):G(!1)},[re]);var fe=function(K,V){A(K),f==null||f(K,V)},F=function(){te(!1),ne(null)},X=r.useMemo(function(){return{register:l,onPreview:le}},[l,le]);return r.createElement(Ne.Provider,{value:X},i,r.createElement(yt,ie({"aria-hidden":!re,movable:M,visible:re,prefixCls:a,closeIcon:P,onClose:F,mousePosition:U,imgCommonProps:oe,src:ce,fallback:v,icons:c,minScale:x,maxScale:R,getContainer:S,current:_,count:$.length,countRender:E,onTransform:O,toolbarRender:p,imageRender:h,onChange:fe},j)))},mt=0;function On(e,t){var n=r.useState(function(){return mt+=1,String(mt)}),o=Z(n,1),a=o[0],i=r.useContext(Ne),m={data:t,canPreview:e};return r.useEffect(function(){if(i)return i.register(a,m)},[]),r.useEffect(function(){i&&i.register(a,m)},[e,t]),a}var jn=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],Mn=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],nt=function(t){var n=t.src,o=t.alt,a=t.onPreviewClose,i=t.prefixCls,m=i===void 0?"rc-image":i,c=t.previewPrefixCls,d=c===void 0?"".concat(m,"-preview"):c,g=t.placeholder,v=t.fallback,u=t.width,b=t.height,C=t.style,S=t.preview,w=S===void 0?!0:S,M=t.className,x=t.onClick,R=t.onError,E=t.wrapperClassName,P=t.wrapperStyle,f=t.rootClassName,O=Oe(t,jn),p=g&&g!==!0,h=vt(w)==="object"?w:{},j=h.src,N=h.visible,y=N===void 0?void 0:N,$=h.onVisibleChange,l=$===void 0?a:$,I=h.getContainer,T=I===void 0?void 0:I,k=h.mask,_=h.maskClassName,A=h.movable,J=h.icons,z=h.scaleStep,W=h.minScale,G=h.maxScale,ee=h.imageRender,ce=h.toolbarRender,oe=Oe(h,Mn),H=j??n,ue=Ue(!!y,{value:y,onChange:l}),re=Z(ue,2),te=re[0],D=re[1],se=St({src:n,isCustomPlaceholder:p,fallback:v}),U=Z(se,3),ne=U[0],le=U[1],fe=U[2],F=r.useState(null),X=Z(F,2),Y=X[0],K=X[1],V=r.useContext(Ne),pe=!!w,we=function(){D(!1),K(null)},ge=Q(m,E,f,me({},"".concat(m,"-error"),fe==="error")),ve=r.useMemo(function(){var he={};return Ke.forEach(function(Ce){t[Ce]!==void 0&&(he[Ce]=t[Ce])}),he},Ke.map(function(he){return t[he]})),Ye=r.useMemo(function(){return L(L({},ve),{},{src:H})},[H,ve]),Be=On(pe,Ye),He=function(Ce){var Re=un(Ce.target),Ee=Re.left,Pe=Re.top;V?V.onPreview(Be,H,Ee,Pe):(K({x:Ee,y:Pe}),D(!0)),x==null||x(Ce)};return r.createElement(r.Fragment,null,r.createElement("div",ie({},O,{className:ge,onClick:pe?He:x,style:L({width:u,height:b},P)}),r.createElement("img",ie({},ve,{className:Q("".concat(m,"-img"),me({},"".concat(m,"-img-placeholder"),g===!0),M),style:L({height:b},C),ref:ne},le,{width:u,height:b,onError:R})),fe==="loading"&&r.createElement("div",{"aria-hidden":"true",className:"".concat(m,"-placeholder")},g),k&&pe&&r.createElement("div",{className:Q("".concat(m,"-mask"),_),style:{display:(C==null?void 0:C.display)==="none"?"none":void 0}},k)),!V&&pe&&r.createElement(yt,ie({"aria-hidden":!te,visible:te,prefixCls:d,onClose:we,mousePosition:Y,src:H,alt:o,imageInfo:{width:u,height:b},fallback:v,getContainer:T,icons:J,movable:A,scaleStep:z,minScale:W,maxScale:G,rootClassName:f,imageRender:ee,imgCommonProps:ve,toolbarRender:ce},oe)))};nt.PreviewGroup=In;var Nn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},Rn=function(t,n){return r.createElement(Me,ie({},t,{ref:n,icon:Nn}))},En=r.forwardRef(Rn),Pn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},$n=function(t,n){return r.createElement(Me,ie({},t,{ref:n,icon:Pn}))},Tn=r.forwardRef($n),Ln={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},_n=function(t,n){return r.createElement(Me,ie({},t,{ref:n,icon:Ln}))},ft=r.forwardRef(_n),zn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},kn=function(t,n){return r.createElement(Me,ie({},t,{ref:n,icon:zn}))},An=r.forwardRef(kn),Dn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},Fn=function(t,n){return r.createElement(Me,ie({},t,{ref:n,icon:Dn}))},Xn=r.forwardRef(Fn);const Qe=e=>({position:e||"absolute",inset:0}),Yn=e=>{const{iconCls:t,motionDurationSlow:n,paddingXXS:o,marginXXS:a,prefixCls:i,colorTextLightSolid:m}=e;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:m,background:new xe("#000").setA(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${n}`,[`.${i}-mask-info`]:Object.assign(Object.assign({},Bt),{padding:`0 ${Xe(o)}`,[t]:{marginInlineEnd:a,svg:{verticalAlign:"baseline"}}})}},Bn=e=>{const{previewCls:t,modalMaskBg:n,paddingSM:o,marginXL:a,margin:i,paddingLG:m,previewOperationColorDisabled:c,previewOperationHoverColor:d,motionDurationSlow:g,iconCls:v,colorTextLightSolid:u}=e,b=new xe(n).setA(.1),C=b.clone().setA(.2);return{[`${t}-footer`]:{position:"fixed",bottom:a,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:e.previewOperationColor,transform:"translateX(-50%)"},[`${t}-progress`]:{marginBottom:i},[`${t}-close`]:{position:"fixed",top:a,right:{_skip_check_:!0,value:a},display:"flex",color:u,backgroundColor:b.toRgbString(),borderRadius:"50%",padding:o,outline:0,border:0,cursor:"pointer",transition:`all ${g}`,"&:hover":{backgroundColor:C.toRgbString()},[`& > ${v}`]:{fontSize:e.previewOperationSize}},[`${t}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${Xe(m)}`,backgroundColor:b.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:o,padding:o,cursor:"pointer",transition:`all ${g}`,userSelect:"none",[`&:not(${t}-operations-operation-disabled):hover > ${v}`]:{color:d},"&-disabled":{color:c,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${v}`]:{fontSize:e.previewOperationSize}}}}},Hn=e=>{const{modalMaskBg:t,iconCls:n,previewOperationColorDisabled:o,previewCls:a,zIndexPopup:i,motionDurationSlow:m}=e,c=new xe(t).setA(.1),d=c.clone().setA(.2);return{[`${a}-switch-left, ${a}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:e.calc(i).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:e.imagePreviewSwitchSize,height:e.imagePreviewSwitchSize,marginTop:e.calc(e.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:e.previewOperationColor,background:c.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${m}`,userSelect:"none","&:hover":{background:d.toRgbString()},"&-disabled":{"&, &:hover":{color:o,background:"transparent",cursor:"not-allowed",[`> ${n}`]:{cursor:"not-allowed"}}},[`> ${n}`]:{fontSize:e.previewOperationSize}},[`${a}-switch-left`]:{insetInlineStart:e.marginSM},[`${a}-switch-right`]:{insetInlineEnd:e.marginSM}}},Vn=e=>{const{motionEaseOut:t,previewCls:n,motionDurationSlow:o,componentCls:a}=e;return[{[`${a}-preview-root`]:{[n]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${n}-body`]:Object.assign(Object.assign({},Qe()),{overflow:"hidden"}),[`${n}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${o} ${t} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},Qe()),{transition:`transform ${o} ${t} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${n}-moving`]:{[`${n}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${a}-preview-root`]:{[`${n}-wrap`]:{zIndex:e.zIndexPopup}}},{[`${a}-preview-operations-wrapper`]:{position:"fixed",zIndex:e.calc(e.zIndexPopup).add(1).equal()},"&":[Bn(e),Hn(e)]}]},Zn=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-mask`]:Object.assign({},Yn(e)),[`${t}-mask:hover`]:{opacity:1},[`${t}-placeholder`]:Object.assign({},Qe())}}},Wn=e=>{const{previewCls:t}=e;return{[`${t}-root`]:Yt(e,"zoom"),"&":_t(e,!0)}},Gn=e=>({zIndexPopup:e.zIndexPopupBase+80,previewOperationColor:new xe(e.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new xe(e.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new xe(e.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:e.fontSizeIcon*1.5}),It=pt("Image",e=>{const t=`${e.componentCls}-preview`,n=qe(e,{previewCls:t,modalMaskBg:new xe("#000").setA(.45).toRgbString(),imagePreviewSwitchSize:e.controlHeightLG});return[Zn(n),Vn(n),nn(qe(n,{componentCls:t})),Wn(n)]},Gn);var Un=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const Ot={rotateLeft:r.createElement(En,null),rotateRight:r.createElement(Tn,null),zoomIn:r.createElement(An,null),zoomOut:r.createElement(Xn,null),close:r.createElement(Ht,null),left:r.createElement(We,null),right:r.createElement(Ze,null),flipX:r.createElement(ft,null),flipY:r.createElement(ft,{rotate:90})},qn=e=>{var{previewPrefixCls:t,preview:n}=e,o=Un(e,["previewPrefixCls","preview"]);const{getPrefixCls:a,direction:i}=r.useContext(tt),m=a("image",t),c=`${m}-preview`,d=a(),g=ht(m),[v,u,b]=It(m,g),[C]=Ct("ImagePreview",typeof n=="object"?n.zIndex:void 0),S=r.useMemo(()=>Object.assign(Object.assign({},Ot),{left:i==="rtl"?r.createElement(Ze,null):r.createElement(We,null),right:i==="rtl"?r.createElement(We,null):r.createElement(Ze,null)}),[i]),w=r.useMemo(()=>{var M;if(n===!1)return n;const x=typeof n=="object"?n:{},R=Q(u,b,g,(M=x.rootClassName)!==null&&M!==void 0?M:"");return Object.assign(Object.assign({},x),{transitionName:De(d,"zoom",x.transitionName),maskTransitionName:De(d,"fade",x.maskTransitionName),rootClassName:R,zIndex:C})},[n]);return v(r.createElement(nt.PreviewGroup,Object.assign({preview:w,previewPrefixCls:c,icons:S},o)))};var gt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const jt=e=>{const{prefixCls:t,preview:n,className:o,rootClassName:a,style:i}=e,m=gt(e,["prefixCls","preview","className","rootClassName","style"]),{getPrefixCls:c,getPopupContainer:d,className:g,style:v,preview:u}=Vt("image"),[b]=Zt("Image"),C=c("image",t),S=c(),w=ht(C),[M,x,R]=It(C,w),E=Q(a,x,R,w),P=Q(o,x,g),[f]=Ct("ImagePreview",typeof n=="object"?n.zIndex:void 0),O=r.useMemo(()=>{if(n===!1)return n;const h=typeof n=="object"?n:{},{getContainer:j,closeIcon:N,rootClassName:y,destroyOnClose:$,destroyOnHidden:l}=h,I=gt(h,["getContainer","closeIcon","rootClassName","destroyOnClose","destroyOnHidden"]);return Object.assign(Object.assign({mask:r.createElement("div",{className:`${C}-mask-info`},r.createElement(zt,null),b==null?void 0:b.preview),icons:Ot},I),{destroyOnClose:l??$,rootClassName:Q(E,y),getContainer:j??d,transitionName:De(S,"zoom",h.transitionName),maskTransitionName:De(S,"fade",h.maskTransitionName),zIndex:f,closeIcon:N??(u==null?void 0:u.closeIcon)})},[n,b,u==null?void 0:u.closeIcon]),p=Object.assign(Object.assign({},v),i);return M(r.createElement(nt,Object.assign({prefixCls:C,preview:O,rootClassName:E,className:P,style:p},m)))};jt.PreviewGroup=qn;var Kn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};const Qn=e=>{const{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:o,componentCls:a,calc:i}=e,m=i(o).sub(n).equal(),c=i(t).sub(n).equal();return{[a]:Object.assign(Object.assign({},Wt(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:m,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${Xe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:c,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:m}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},ot=e=>{const{lineWidth:t,fontSizeIcon:n,calc:o}=e,a=e.fontSizeSM;return qe(e,{tagFontSize:a,tagLineHeight:Xe(o(e.lineHeightSM).mul(a).equal()),tagIconSize:o(n).sub(o(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},rt=e=>({defaultBg:new xe(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),Mt=pt("Tag",e=>{const t=ot(e);return Qn(t)},rt);var Jn=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const eo=r.forwardRef((e,t)=>{const{prefixCls:n,style:o,className:a,checked:i,onChange:m,onClick:c}=e,d=Jn(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:g,tag:v}=r.useContext(tt),u=x=>{m==null||m(!i),c==null||c(x)},b=g("tag",n),[C,S,w]=Mt(b),M=Q(b,`${b}-checkable`,{[`${b}-checkable-checked`]:i},v==null?void 0:v.className,a,S,w);return C(r.createElement("span",Object.assign({},d,{ref:t,style:Object.assign(Object.assign({},o),v==null?void 0:v.style),className:M,onClick:u})))}),to=e=>Gt(e,(t,{textColor:n,lightBorderColor:o,lightColor:a,darkColor:i})=>({[`${e.componentCls}${e.componentCls}-${t}`]:{color:n,background:a,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:i,borderColor:i},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}})),no=bt(["Tag","preset"],e=>{const t=ot(e);return to(t)},rt);function oo(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const ke=(e,t,n)=>{const o=oo(n);return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${n}`],background:e[`color${o}Bg`],borderColor:e[`color${o}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},ro=bt(["Tag","status"],e=>{const t=ot(e);return[ke(t,"success","Success"),ke(t,"processing","Info"),ke(t,"error","Error"),ke(t,"warning","Warning")]},rt);var ao=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const io=r.forwardRef((e,t)=>{const{prefixCls:n,className:o,rootClassName:a,style:i,children:m,icon:c,color:d,onClose:g,bordered:v=!0,visible:u}=e,b=ao(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:C,direction:S,tag:w}=r.useContext(tt),[M,x]=r.useState(!0),R=Ut(b,["closeIcon","closable"]);r.useEffect(()=>{u!==void 0&&x(u)},[u]);const E=qt(d),P=Kt(d),f=E||P,O=Object.assign(Object.assign({backgroundColor:d&&!f?d:void 0},w==null?void 0:w.style),i),p=C("tag",n),[h,j,N]=Mt(p),y=Q(p,w==null?void 0:w.className,{[`${p}-${d}`]:f,[`${p}-has-color`]:d&&!f,[`${p}-hidden`]:!M,[`${p}-rtl`]:S==="rtl",[`${p}-borderless`]:!v},o,a,j,N),$=A=>{A.stopPropagation(),g==null||g(A),!A.defaultPrevented&&x(!1)},[,l]=on(ct(e),ct(w),{closable:!1,closeIconRender:A=>{const J=r.createElement("span",{className:`${p}-close-icon`,onClick:$},A);return Qt(A,J,z=>({onClick:W=>{var G;(G=z==null?void 0:z.onClick)===null||G===void 0||G.call(z,W),$(W)},className:Q(z==null?void 0:z.className,`${p}-close-icon`)}))}}),I=typeof b.onClick=="function"||m&&m.type==="a",T=c||null,k=T?r.createElement(r.Fragment,null,T,m&&r.createElement("span",null,m)):m,_=r.createElement("span",Object.assign({},R,{ref:t,className:y,style:O}),k,l,E&&r.createElement(no,{key:"preset",prefixCls:p}),P&&r.createElement(ro,{key:"status",prefixCls:p}));return h(I?r.createElement(Jt,{component:"Tag"},_):_)}),Je=io;Je.CheckableTag=eo;function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},et.apply(this,arguments)}const so=(e,t)=>r.createElement(en,et({},e,{ref:t,icon:Kn})),lo=r.forwardRef(so),co=[{title:"Dashboard",href:"/dashboard"},{title:"Incidents",href:"/incident-reports"}],uo="AIzaSyC_WZ0T_FCfAV_G1yfuBGozFa2zOX9l82c",Ae={lat:15.9061,lng:120.5853};function Io(){const{props:e}=Pt(),[t,n]=r.useState(e.incidents||[]),[o,a]=r.useState(e.barangays||[]),[i,m]=r.useState(e.incidents||[]),[c,d]=r.useState(!1),[g,v]=r.useState(!1),[u]=q.useForm(),[b,C]=r.useState(null),[S,w]=r.useState(Ae),[M,x]=r.useState(Ae),[R,E]=r.useState({barangay:null,status:null});r.useEffect(()=>{n(e.incidents||[]),m(e.incidents||[]),a(e.barangays||[])},[e.incidents,e.barangays]),r.useEffect(()=>{let l=[...t];R.barangay&&(l=l.filter(I=>I.barangay_id===R.barangay)),R.status&&(l=l.filter(I=>I.status===R.status)),m(l)},[R,t]);const P={pending:"orange",in_progress:"blue",resolved:"green",closed:"gray"},f={low:"green",medium:"blue",high:"orange",critical:"red"},O=[{title:"Title",dataIndex:"title",key:"title"},{title:"Barangay",dataIndex:["barangay","name"],key:"barangay"},{title:"Status",dataIndex:"status",key:"status",render:l=>s.jsx(Je,{color:P[l],children:l.replace("_"," ").toUpperCase()})},{title:"Severity",dataIndex:"severity",key:"severity",render:l=>s.jsx(Je,{color:f[l],children:l.toUpperCase()})},{title:"Creator",dataIndex:"creator",key:"creator"},{title:"Actions",key:"actions",render:(l,I)=>s.jsxs(_e,{children:[s.jsx(de,{icon:s.jsx(cn,{}),onClick:()=>Te.visit(`/incident-reports/${I.id}`)}),s.jsx(de,{icon:s.jsx(sn,{}),onClick:()=>p(I)}),s.jsx(de,{icon:s.jsx(ln,{}),danger:!0,onClick:()=>h(I.id)})]})}],p=l=>{C(l.id),u.setFieldsValue(l),w({lat:Number(l.latitude),lng:Number(l.longitude)}),d(!0)},h=async l=>{try{await Te.delete(`/incident-reports/${l}`,{preserveState:!0,preserveScroll:!0}),Le.success("Incident deleted successfully")}catch{Le.error("Failed to delete incident")}},j=l=>{var k,_;const I=(k=l.latLng)==null?void 0:k.lat(),T=(_=l.latLng)==null?void 0:_.lng();I&&T&&(w({lat:Number(I),lng:Number(T)}),u.setFieldsValue({latitude:I,longitude:T}))},N=async l=>{try{b?await Te.put(`/incident-reports/${b}`,l,{preserveState:!0,preserveScroll:!0}):await Te.post("/incident-reports",l,{preserveState:!0,preserveScroll:!0}),Le.success(`Incident ${b?"updated":"created"} successfully`),d(!1),u.resetFields(),C(null),w(Ae)}catch{Le.error(`Failed to ${b?"update":"create"} incident`)}},y=l=>{E({barangay:l.barangay||null,status:l.status||null}),v(!1)},$=()=>{E({barangay:null,status:null}),u.resetFields(["barangay","status"])};return s.jsxs(Lt,{breadcrumbs:co,children:[s.jsx($t,{title:"Incidents Management"}),s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[s.jsxs("div",{className:"flex justify-between mb-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Incidents Management"}),s.jsxs(_e,{children:[s.jsx(de,{icon:s.jsx(lo,{}),onClick:()=>v(!0),children:"Filters"}),s.jsx(de,{type:"primary",icon:s.jsx(rn,{}),onClick:()=>{C(null),u.resetFields(),w(Ae),d(!0)},children:"Add Incident"})]})]}),s.jsx("div",{className:"border rounded-xl p-4",children:s.jsx(an,{columns:O,dataSource:i,rowKey:"id",onRow:l=>({onClick:()=>{x({lat:Number(l.latitude),lng:Number(l.longitude)})}})})}),s.jsx("div",{className:"border rounded-xl p-4",style:{height:"400px"},children:s.jsx(Tt,{googleMapsApiKey:uo,children:s.jsx(st,{mapContainerStyle:{width:"100%",height:"100%"},center:M,zoom:14,children:i.map(l=>s.jsx(lt,{position:{lat:Number(l.latitude),lng:Number(l.longitude)},title:l.title,icon:{url:`https://maps.google.com/mapfiles/ms/icons/${l.severity==="critical"?"red":l.severity==="high"?"orange":l.severity==="medium"?"yellow":"green"}-dot.png`},onClick:()=>{x({lat:Number(l.latitude),lng:Number(l.longitude)})}},l.id))})})}),s.jsx(ut,{title:`${b?"Edit":"Add"} Incident`,open:c,onCancel:()=>d(!1),footer:null,width:800,children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(q,{form:u,layout:"vertical",onFinish:N,children:[s.jsx(q.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please input incident title!"}],children:s.jsx(je,{})}),s.jsx(q.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please input description!"}],children:s.jsx(je.TextArea,{})}),s.jsx(q.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status!"}],children:s.jsxs(B,{children:[s.jsx(B.Option,{value:"pending",children:"Pending"}),s.jsx(B.Option,{value:"in_progress",children:"In Progress"}),s.jsx(B.Option,{value:"resolved",children:"Resolved"}),s.jsx(B.Option,{value:"closed",children:"Closed"})]})}),s.jsx(q.Item,{name:"severity",label:"Severity",rules:[{required:!0,message:"Please select severity!"}],children:s.jsxs(B,{children:[s.jsx(B.Option,{value:"low",children:"Low"}),s.jsx(B.Option,{value:"medium",children:"Medium"}),s.jsx(B.Option,{value:"high",children:"High"}),s.jsx(B.Option,{value:"critical",children:"Critical"})]})}),s.jsx(q.Item,{name:"barangay_id",label:"Barangay",rules:[{required:!0,message:"Please select barangay!"}],children:s.jsx(B,{children:o.map(l=>s.jsx(B.Option,{value:l.id,children:l.name},l.id))})}),s.jsx(q.Item,{name:"creator",label:"Creator",rules:[{required:!0,message:"Please input creator name!"}],children:s.jsx(je,{})}),s.jsx(q.Item,{name:"latitude",label:"Latitude",rules:[{required:!0,message:"Please input latitude!"}],children:s.jsx(je,{type:"number",step:"any"})}),s.jsx(q.Item,{name:"longitude",label:"Longitude",rules:[{required:!0,message:"Please input longitude!"}],children:s.jsx(je,{type:"number",step:"any"})}),b&&s.jsx(q.Item,{name:"image_path",label:"Current Image",children:u.getFieldValue("image_path")&&s.jsx(jt,{width:200,src:`/storage/${u.getFieldValue("image_path")}`,alt:"Incident Image"})}),s.jsx(q.Item,{children:s.jsxs(_e,{children:[s.jsx(de,{type:"primary",htmlType:"submit",children:b?"Update":"Create"}),s.jsx(de,{onClick:()=>d(!1),children:"Cancel"})]})})]}),s.jsx("div",{style:{height:"400px"},children:s.jsx(st,{mapContainerStyle:{width:"100%",height:"100%"},center:S,zoom:14,onClick:j,children:s.jsx(lt,{position:S,draggable:!0,onDragEnd:l=>{var k,_;const I=(k=l.latLng)==null?void 0:k.lat(),T=(_=l.latLng)==null?void 0:_.lng();I&&T&&(w({lat:Number(I),lng:Number(T)}),u.setFieldsValue({latitude:I,longitude:T}))}})})})]})}),s.jsx(ut,{title:"Filter Incidents",open:g,onCancel:()=>v(!1),footer:null,children:s.jsxs(q,{layout:"vertical",onFinish:y,initialValues:{barangay:R.barangay,status:R.status},children:[s.jsx(q.Item,{name:"barangay",label:"Filter by Barangay",children:s.jsx(B,{allowClear:!0,children:o.map(l=>s.jsx(B.Option,{value:l.id,children:l.name},l.id))})}),s.jsx(q.Item,{name:"status",label:"Filter by Status",children:s.jsxs(B,{allowClear:!0,children:[s.jsx(B.Option,{value:"pending",children:"Pending"}),s.jsx(B.Option,{value:"in_progress",children:"In Progress"}),s.jsx(B.Option,{value:"resolved",children:"Resolved"}),s.jsx(B.Option,{value:"closed",children:"Closed"})]})}),s.jsx(q.Item,{children:s.jsxs(_e,{children:[s.jsx(de,{type:"primary",htmlType:"submit",children:"Apply Filters"}),s.jsx(de,{onClick:$,children:"Reset Filters"}),s.jsx(de,{onClick:()=>v(!1),children:"Cancel"})]})})]})})]})]})}export{Io as default};
